!function(a,b){"function"==typeof define&&define.amd?define(["jquery","angular","sstooltip"],b):b(a.$,a.angular,a.sstooltip)}(this,function(a,b,c){function d(a,b){a.$$phase||a.$root.$$phase?b():a.$apply(b)}function e(a,b,c){return f(a)?a(b):a?a:c}var f=function(a){var b={};return a&&"[object Function]"===b.toString.call(a)},g=b.module("sstooltip",[]);return g.directive("sstooltip",[function(){return{restrict:"AE",replace:!0,template:'<div class="sstooltip-container"><div class="sstooltip"><div ng-if="tooltipText">{{tooltipText}}</div><div ng-if="tooltipSrc"><ng-include src="tooltipSrc"></ng-include></div></div></div>',scope:{tooltipKey:"@",tooltipSrc:"=",tooltipText:"="},link:function(a,e,f){var g=e[0].querySelector(".sstooltip"),h=new c(g);f.tooltipTheme&&b.element(g).addClass("sstooltip-"+f.tooltipTheme),b.element(g).on("touchstart",function(a){h.hide(),a.preventDefault(),a.stopPropagation()}),a.$on("sstooltip:show",function(b,c,e){c==a.tooltipKey&&(d(a,function(){a.data=e.data}),h.show(null,e.mouseEvent))}),a.$on("sstooltip:move",function(b,c,d){c==a.tooltipKey&&h.show(null,d.mouseEvent)}),a.$on("sstooltip:hide",function(){h.hide()})}}}]),g.factory("sstooltipManager",[function(){return function(a,c){function d(b,c,d,f,j){b&&a.$on(b,function(a,b){g(e(j,b,b.mouseEvent),e(f,b,b.data))}),c&&a.$on(c,function(a,b){h(e(j,b,b.mouseEvent),e(f,b,b.data))}),d&&a.$on(d,function(){i()})}function f(a,c,d,f,j){var k=b.element(a);c&&k.on(c,function(a){g(a,e(j,a,a.data))}),d&&k.on(d,function(a){h(a,e(j,a,a.data))}),f&&k.on(f,i)}function g(b,d){a.$broadcast("sstooltip:show",c,{mouseEvent:b,data:d})}function h(b,d){a.$broadcast("sstooltip:move",c,{mouseEvent:b,data:d})}function i(){a.$broadcast("sstooltip:hide",c)}return{triggerOnScopeEvents:d,triggerOnDomEvents:f,show:g,move:h,hide:i}}}]),g});