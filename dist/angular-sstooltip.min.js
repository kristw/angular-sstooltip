!function(a,b){"function"==typeof define&&define.amd?define(["jquery","angular","sstooltip"],b):b(a.$,a.angular,a.sstooltip)}(this,function(a,b,c){function d(a,b){a.$$phase||a.$root.$$phase?b():a.$apply(b)}function e(a,b){return f(a)?a:f(a)?a:a?function(){return a}:b}var f=function(a){var b={};return a&&"[object Function]"===b.toString.call(a)},g=b.module("sstooltip",[]);return g.directive("sstooltip",[function(){return{restrict:"AE",replace:!0,template:'<div class="sstooltip-container"><div class="sstooltip"><div ng-if="tooltipText">{{tooltipText}}</div><div ng-if="tooltipSrc"><ng-include src="tooltipSrc"></ng-include></div></div></div>',scope:{tooltipKey:"@",tooltipSrc:"=",tooltipText:"="},link:function(a,e,f){var g=e[0].querySelector(".sstooltip"),h=new c(g);f.tooltipTheme&&b.element(g).addClass("sstooltip-"+f.tooltipTheme),b.element(g).on("touchstart",function(a){h.hide(),a.preventDefault(),a.stopPropagation()}),a.$on("sstooltip:show",function(b,c,e){c==a.tooltipKey&&(d(a,function(){a.data=e.data}),h.show(null,e.mouseEvent))}),a.$on("sstooltip:move",function(b,c,d){c==a.tooltipKey&&h.show(null,d.mouseEvent)}),a.$on("sstooltip:hide",function(){h.hide()})}}}]),g.factory("sstooltipManager",[function(){return function(a,c){function d(b,d){a.$broadcast("sstooltip:show",c,{mouseEvent:b,data:d})}function g(b,d){a.$broadcast("sstooltip:move",c,{mouseEvent:b,data:d})}function h(){a.$broadcast("sstooltip:hide",c)}function i(b,c,f,i,j){var k=e(i,function(a,b){return b.data}),l=e(j,function(a,b){return b.mouseEvent});b&&a.$on(b,function(){var a=Array.prototype.slice.call(arguments,0);d(l.apply(this,a),k.apply(this,a))}),c&&a.$on(c,function(){var a=Array.prototype.slice.call(arguments,0);g(l.apply(this,a),k.apply(this,a))}),f&&a.$on(f,function(){h()})}function j(a,c,i,j,k){var l=e(k,function(a){return a.data}),m=f(a.on)?a:b.element(a);c&&m.on(c,function(a){var b=Array.prototype.slice.call(arguments,0);d(a,l.apply(this,b))}),i&&m.on(i,function(a){var b=Array.prototype.slice.call(arguments,0);g(a,l.apply(this,b))}),j&&m.on(j,function(){h()})}function k(a,b,c,f,i){var j=e(i,function(a){return a});b&&a.on(b,function(){var a=Array.prototype.slice.call(arguments,0);d(d3.event,j.apply(this,a))}),c&&a.on(c,function(){g(d3.event,j.apply(this,args))}),f&&a.on(f,function(){h()})}return{triggerOnScopeEvents:i,triggerOnDomEvents:j,triggerOnD3Events:k,show:d,move:g,hide:h}}}]),g});