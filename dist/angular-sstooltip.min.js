!function(a,b){"function"==typeof define&&define.amd?define(["angular","sstooltip"],b):b(a.angular,a.sstooltip)}(this,function(a,b){function c(a,b){a.$$phase||a.$root.$$phase?b():a.$apply(b)}function d(a,b){return e(a)?a:e(a)?a:a?function(){return a}:b}var e=function(a){var b={};return a&&"[object Function]"===b.toString.call(a)},f=a.module("sstooltip",[]);return f.directive("sstooltip",[function(){return{restrict:"AE",replace:!0,template:'<div class="sstooltip-container"><div class="sstooltip"><div ng-if="tooltipText">{{tooltipText}}</div><div ng-if="tooltipSrc"><ng-include src="tooltipSrc"></ng-include></div></div></div>',scope:{tooltipKey:"@",tooltipSrc:"=",tooltipText:"="},link:function(d,e,f){var g=e[0].querySelector(".sstooltip"),h=new b(g);f.tooltipTheme&&a.element(g).addClass("sstooltip-"+f.tooltipTheme),a.element(g).on("touchstart",function(a){h.hide(),a.preventDefault(),a.stopPropagation()}),d.$on("sstooltip:show",function(a,b,e,f){b==d.tooltipKey&&(c(d,function(){d.data=f}),h.show(null,e))}),d.$on("sstooltip:move",function(a,b,c){b==d.tooltipKey&&h.show(null,c)}),d.$on("sstooltip:hide",function(){h.hide()})}}}]),f.factory("sstooltipManager",[function(){return function(b,c){function f(a,d){return b.$broadcast("sstooltip:show",c,a,d),m}function g(a){return b.$broadcast("sstooltip:move",c,a),m}function h(){return b.$broadcast("sstooltip:hide",c),m}function i(a,b,c,d,e,i,j){return c&&b.call(a,c,function(){var a=Array.prototype.slice.call(arguments,0);f(j.apply(this,a),i.apply(this,a))}),d&&b.call(a,d,function(){var a=Array.prototype.slice.call(arguments,0);g(j.apply(this,a))}),e&&b.call(a,e,function(){h()}),m}function j(a,c,e,f,g){return i(b,b.$on,a,c,e,d(f,function(a,b){return b.data}),d(g,function(a,b){return b.mouseEvent}))}function k(b,c,f,g,h,j){var k=e(b.on)?b:a.element(b);return i(k,k.on,c,f,g,d(h,function(a){return a.data}),d(j,function(a){return a}))}function l(a,b,c,e,f,g){return i(a,a.on,b,c,e,d(f,function(a,b){return a}),d(g,function(){return d3.event}))}var m={};return m.show=f,m.move=g,m.hide=h,m.watchScope=j,m.watchDom=k,m.watchD3=l,m}}]),f});