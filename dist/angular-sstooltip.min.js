!function(a,b){"function"==typeof define&&define.amd?define(["jquery","angular","sstooltip"],b):b(a.$,a.angular,a.sstooltip)}(this,function(a,b,c){function e(a,b){a.$$phase||a.$root.$$phase?b():a.$apply(b)}function f(a,b){return g(fnOrObj)?a:g(a)?a:a?function(){return a}:b}var g=function(a){var b={};return a&&"[object Function]"===b.toString.call(a)},h=b.module("sstooltip",[]);return h.directive("sstooltip",[function(){return{restrict:"AE",replace:!0,template:'<div class="sstooltip-container"><div class="sstooltip"><div ng-if="tooltipText">{{tooltipText}}</div><div ng-if="tooltipSrc"><ng-include src="tooltipSrc"></ng-include></div></div></div>',scope:{tooltipKey:"@",tooltipSrc:"=",tooltipText:"="},link:function(a,d,f){var g=d[0].querySelector(".sstooltip"),h=new c(g);f.tooltipTheme&&b.element(g).addClass("sstooltip-"+f.tooltipTheme),b.element(g).on("touchstart",function(a){h.hide(),a.preventDefault(),a.stopPropagation()}),a.$on("sstooltip:show",function(b,c,d){c==a.tooltipKey&&(e(a,function(){a.data=d.data}),h.show(null,d.mouseEvent))}),a.$on("sstooltip:move",function(b,c,d){c==a.tooltipKey&&h.show(null,d.mouseEvent)}),a.$on("sstooltip:hide",function(){h.hide()})}}}]),h.factory("sstooltipManager",[function(){return function(a,c){function e(b,d){a.$broadcast("sstooltip:show",c,{mouseEvent:b,data:d})}function h(b,d){a.$broadcast("sstooltip:move",c,{mouseEvent:b,data:d})}function i(){a.$broadcast("sstooltip:hide",c)}function j(b,c,d,g,j){var k=f(g,function(a,b){return b.data}),l=f(g,function(a,b){return b.mouseEvent});b&&a.$on(b,function(){var a=Array.prototype.slice.call(arguments,0);e(l.apply(this,a),k.apply(this,a))}),c&&a.$on(c,function(){var a=Array.prototype.slice.call(arguments,0);h(l.apply(this,a),k.apply(this,a))}),d&&a.$on(d,function(){i()})}function k(a,c,j,k,l){var m=f(l,function(a){return d.data}),n=g(a.on)?a:b.element(a);c&&n.on(c,function(a){var b=Array.prototype.slice.call(arguments,0);e(a,m.apply(this,b))}),j&&n.on(j,function(a){var b=Array.prototype.slice.call(arguments,0);h(a,m.apply(this,b))}),k&&n.on(k,function(){i()})}function l(a,b,c,d,g){var j=f(g,function(a){return a});b&&a.on(b,function(){var a=Array.prototype.slice.call(arguments,0);e(d3.event,j.apply(this,a))}),c&&a.on(c,function(){h(d3.event,j.apply(this,args))}),d&&a.on(d,function(){i()})}return{triggerOnScopeEvents:j,triggerOnDomEvents:k,triggerOnD3Events:l,show:e,move:h,hide:i}}}]),h});