!function(a,b){"function"==typeof define&&define.amd?define(["jquery","angular","sstooltip"],b):b(a.$,a.angular,a.sstooltip)}(this,function(a,b,c){function d(a,b){a.$$phase||a.$root.$$phase?b():a.$apply(b)}function e(a,b){return f(a)?a:f(a)?a:a?function(){return a}:b}var f=function(a){var b={};return a&&"[object Function]"===b.toString.call(a)},g=b.module("sstooltip",[]);return g.directive("sstooltip",[function(){return{restrict:"AE",replace:!0,template:'<div class="sstooltip-container"><div class="sstooltip"><div ng-if="tooltipText">{{tooltipText}}</div><div ng-if="tooltipSrc"><ng-include src="tooltipSrc"></ng-include></div></div></div>',scope:{tooltipKey:"@",tooltipSrc:"=",tooltipText:"="},link:function(a,e,f){var g=e[0].querySelector(".sstooltip"),h=new c(g);f.tooltipTheme&&b.element(g).addClass("sstooltip-"+f.tooltipTheme),b.element(g).on("touchstart",function(a){h.hide(),a.preventDefault(),a.stopPropagation()}),a.$on("sstooltip:show",function(b,c,e,f){c==a.tooltipKey&&(d(a,function(){a.data=f}),h.show(null,e))}),a.$on("sstooltip:move",function(b,c,d){c==a.tooltipKey&&h.show(null,d)}),a.$on("sstooltip:hide",function(){h.hide()})}}}]),g.factory("sstooltipManager",[function(){return function(a,c){function d(b,d){return a.$broadcast("sstooltip:show",c,b,d),m}function g(b){return a.$broadcast("sstooltip:move",c,b),m}function h(){return a.$broadcast("sstooltip:hide",c),m}function i(a,b,c,e,f,i){return b&&a(b,function(){var a=Array.prototype.slice.call(arguments,0);d(i.apply(this,a),f.apply(this,a))}),c&&a(c,function(){var a=Array.prototype.slice.call(arguments,0);g(i.apply(this,a))}),e&&a(e,function(){h()}),m}function j(b,c,d,f,g){return i(a.$on,b,c,d,e(f,function(a,b){return b.data}),e(g,function(a,b){return b.mouseEvent}))}function k(a,c,d,g,h,j){var k=f(a.on)?a:b.element(a);return i(k.on,c,d,g,e(h,function(a){return a.data}),e(j,function(a){return a}))}function l(a,b,c,d,f,g){return i(a.on,b,c,d,e(f,function(a,b){return a}),e(g,function(){return d3.event}))}var m={};return m.show=d,m.move=g,m.hide=h,m.watchScope=j,m.watchDom=k,m.watchD3=l,m}}]),g});